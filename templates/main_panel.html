{% extends "base.html" %}

{%block title%} Panel główny {%endblock%}

{% block content %}
    <h1>Panel główny</h1>
    <p>Inteligentny System Monitorowania Roślin</p>
    
    <div class="container mt-5">
        <div class="row" id="sortable-grid">
            <!-- Bloczek 1 -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4 d-flex justify-content-center">
                <div class="sensor-card bg-light p-3 text-center">
                    <h4>Natężenie światła</h4>
                    <p id="LightSensorLuxValue">--</p>
                    
                </div>
            </div>
            
            <!-- Bloczek 2 -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4 d-flex justify-content-center">
                <div class="sensor-card bg-light p-3 text-center">
                    <h4>Bloczek 2</h4>
                    <p id="oilTemperatureValue1">--</p>
                </div>
            </div>
            
            <!-- Bloczek 3 -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4 d-flex justify-content-center">
                <div class="sensor-card bg-light p-3 text-center">
                    <h4>Bloczek 3</h4>
                    <p>Opis bloczka</p>
                </div>
            </div>
            
            <!-- Bloczek 4 -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4 d-flex justify-content-center">
                <div class="sensor-card bg-light p-3 text-center">
                    <h4>Bloczek 4</h4>
                    <p>Opis bloczka</p>
                </div>
            </div>
            
            <!-- Bloczek 5 -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4 d-flex justify-content-center">
                <div class="sensor-card bg-light p-3 text-center">
                    <h4>Bloczek 5</h4>
                    <p>Opis bloczka</p>
                </div>
            </div>
            
            <!-- Bloczek 6 -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4 d-flex justify-content-center">
                <div class="sensor-card bg-light p-3 text-center">
                    <h4>Bloczek 6</h4>
                    <p>Opis bloczka</p>
                </div>
            </div>
        </div>
    </div>

    <!-- SortableJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>
    <script>
        // Inicjalizacja SortableJS na elemencie o id "sortable-grid"
        document.addEventListener("DOMContentLoaded", function() {
            const grid = document.getElementById('sortable-grid');
            Sortable.create(grid, {
                animation: 150, // Czas trwania animacji
                ghostClass: 'sortable-ghost' // Klasa dodana do przeciąganego elementu
            });
        });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const socket = io();

            socket.on('sensor_data', function(data) {
                if (data["Light sensor 1"]) {
                    document.getElementById("LightSensorLuxValue").innerText = data["Light Sensor 1"].lux || '--';
                }
                if (data["Soil Temperature Sensor 1"]) {
                    document.getElementById("SoilTemperatureValue1").innerText = data["Soil Temperature Sensor 1"].temperature || '--';
                }

                
            });
        });
    </script>
{% endblock %}